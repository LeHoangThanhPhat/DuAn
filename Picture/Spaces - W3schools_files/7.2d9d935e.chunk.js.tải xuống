(this["webpackJsonphosting-ui"]=this["webpackJsonphosting-ui"]||[]).push([[7],{337:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a(82),n=a(28),o=a(57),s=a(25),c=a(50),i=a(3);function d(e,t){return function(a,d){var u=d(),l=u.main.subscription_plan,_=u.main.quota,p=u.main.usage,b=l.cname;if(!0!=={ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED:!0,NR_OF_SPACES_QUOTA_EXCEEDED:!0,SPACE_FILE_SIZE_QUOTA_EXCEEDED:!0,SPACE_NR_OF_FILES_QUOTA_EXCEEDED:!0,TOTAL_STORAGE_AMOUNT_QUOTA_EXCEEDED:!0}[e.code]){var h={id:s.e(),dismissed:!1,type:"error",header:"Quota error",body:e.description};return a(Object(n.a)(h)),h.body}var j={id:s.e(),dismissed:!1,type:"error",header:"",body:""};if("ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED"===e.code)"undefined"!==typeof e.meta&&"undefined"!==typeof e.meta.header_text?j.header=Object(i.jsx)(i.Fragment,{children:e.meta.header_text}):j.header=Object(i.jsx)(i.Fragment,{children:"Out of quota"}),e.description||(e.description="Your account is out of quota, and performing this action is not allowed."),l.can_be_upgraded?j.body=Object(i.jsxs)(i.Fragment,{children:[e.description,"\xa0Do you need more requests, data or storage? Upgrade to the ",Object(i.jsx)("strong",{children:l.upgrade_to_cname})," plan."]}):j.body=Object(i.jsx)(i.Fragment,{children:e.description});else if("NR_OF_SPACES_QUOTA_EXCEEDED"===e.code){var O=1===_.storage.number_of_spaces?"space":"spaces",f=1===p.storage.number_of_spaces?"space":"spaces";j.header=Object(i.jsxs)(i.Fragment,{children:["Your ",l.cname," plan includes ",_.storage.number_of_spaces," ",O]}),l.can_be_upgraded?j.body=Object(i.jsxs)(i.Fragment,{children:["With a ",Object(i.jsx)("strong",{children:l.cname})," plan you get ",_.storage.number_of_spaces," ",O,". By upgrading your plan you get more spaces included."]}):j.body=Object(i.jsxs)(i.Fragment,{children:["With a ",Object(i.jsx)("strong",{children:l.cname})," plan you get ",_.storage.number_of_spaces," ",O," included, and you already have ",p.storage.number_of_spaces," ",f,". Delete one of your existing spaces, if you want to create one more."]})}else if("SPACE_FILE_SIZE_QUOTA_EXCEEDED"===e.code){var m=o.b(_.storage.max_file_size);j.header=Object(i.jsxs)(i.Fragment,{children:["File is larger than ",m]}),l.can_be_upgraded?j.body=Object(i.jsxs)(i.Fragment,{children:["The file ",Object(i.jsx)("strong",{children:Object(c.o)(t.base_name)})," is too large. With the ",Object(i.jsx)("strong",{children:b})," plan you can upload files that are up to ",m,". Do you want to upload larger files? ",Object(i.jsx)("strong",{children:"Upgrade your plan."})]}):j.body=Object(i.jsxs)(i.Fragment,{children:["The file ",Object(i.jsx)("strong",{children:Object(c.o)(t.base_name)})," is too large. You can upload files that are up to ",m,"."]})}else if("SPACE_NR_OF_FILES_QUOTA_EXCEEDED"===e.code)j.header=Object(i.jsx)(i.Fragment,{children:"Maximum number of files and folders reached"}),l.can_be_upgraded?j.body=Object(i.jsxs)(i.Fragment,{children:["You have reached the limit of ",Object(i.jsxs)("strong",{children:[_.storage.number_of_files_per_space," files and folders"]})," on the ",Object(i.jsx)("strong",{children:b})," plan. Make room for more files and folders, by deleting some of them - and try to upload or create again. Do you want to upload or create more files and folders? ",Object(i.jsx)("strong",{children:"Upgrade your plan."})]}):j.body=Object(i.jsxs)(i.Fragment,{children:["You have reached the limit of ",Object(i.jsxs)("strong",{children:[_.storage.number_of_files_per_space," files and folders"]}),". Make room for more files and folders, by deleting some of them - and try to upload or create again."]});else if("TOTAL_STORAGE_AMOUNT_QUOTA_EXCEEDED"===e.code){var g=o.b(_.storage.amount);j.header=Object(i.jsx)(i.Fragment,{children:"File not saved"}),l.can_be_upgraded?j.body=Object(i.jsxs)(i.Fragment,{children:["You have reached the ",Object(i.jsx)("strong",{children:g})," storage limit on the ",Object(i.jsx)("strong",{children:b})," plan, so your changes did not get saved. To add more storage you can either upgrade your plan - or delete some files to free up storage."]}):j.body=Object(i.jsxs)(i.Fragment,{children:["You have reached the ",Object(i.jsx)("strong",{children:g})," storage limit on the ",Object(i.jsx)("strong",{children:b})," plan, so your changes did not get saved. Delete some files to free up storage."]})}return l.can_be_upgraded?(j.learnMoreButtonText="Learn more",j.upgradeButtonText="Upgrade"):j.dismissButtonText="Got it",a(Object(r.a)(j)),j.body}}},342:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o}));var r=function(e){return e.usage_status._out_of_quota?{code:"ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED",description:"Your account is out of quota, and creating a new space is not allowed."}:e.usage.storage.number_of_spaces>=e.quota.storage.number_of_spaces?{code:"NR_OF_SPACES_QUOTA_EXCEEDED"}:{code:"0"}},n=function(e){return e.usage_status._out_of_quota?{code:"ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED",description:"Your space is temporarily closed, and resetting it is not allowed.",meta:{header_text:"Space temporarily closed"}}:{code:"0"}},o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"file";return e.usage_status._out_of_quota?{code:"ACTION_FORBIDDEN_WHEN_QUOTA_EXCEEDED",description:"Your space is temporarily closed, and you cannot add more ".concat(a,"s."),meta:{header_text:"Space temporarily closed"},context:"quota"}:"OPEN"!==t.state&&"PRIVATE"!==t.state?{code:"SPACE_ACTION_FORBIDDEN",description:"Your space is temporarily closed, and you cannot add more ".concat(a,"s."),meta:{header_text:"Space temporarily closed"},context:"std"}:t.usage.storage.number_of_files_per_space>=e.quota.storage.number_of_files_per_space?{code:"SPACE_NR_OF_FILES_QUOTA_EXCEEDED",context:"quota"}:{code:"0"}}},358:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(1),n=(a(41),function(e){return Object(r.useEffect)(e,["componentDidMount"])})},778:function(e,t,a){},827:function(e,t,a){"use strict";a.r(t);var r=a(13),n=a(20),o=a(24),s=a(1),c=a(350),i=a(345),d=a(802),u=a(823),l=a(371),_=(a(778),a(18)),p=a(71),b=a(6),h=a(126),j=a(19),O=a(25),f=a(128),m=a(46),g=a(358),E=a(342),x=a(337),y=a(3);t.default=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],D=t[1],v=Object(s.useState)(!1),T=Object(o.a)(v,2),A=T[0],C=T[1],F=Object(s.useState)(void 0),S=Object(o.a)(F,2),N=S[0],I=S[1],U=Object(s.useState)(!1),w=Object(o.a)(U,2),q=w[0],R=w[1],k=Object(_.g)(),Q=Object(j.c)(),X=Object(j.d)((function(e){return e.createSpace.template})),B=Object(j.d)((function(e){return e.main}));function P(e){e.preventDefault(),function(){L.apply(this,arguments)}()}function Y(e){return e.length<4?"The name must be at least 4 characters.":e.length>20?"The name cannot be more than 20 characters.":/^[a-z]/.test(e)?/^[a-z\-0-9]*$/.test(e)?/(.*)-$/.test(e)?"The name can not end with a dash.":void 0:"The name can only contain lower case letters, numbers and dashes.":"The name must start with a lower case letter."}function L(){return(L=Object(n.a)(Object(r.a)().mark((function e(){var t,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===N){e.next=3;break}return C(!0),e.abrupt("return");case 3:if(!(t=Y(a))){e.next=8;break}return I(t),C(!0),e.abrupt("return");case 8:return R(!0),e.next=11,Object(b.l)({url:"/spaceregistration",method:"POST",data:{action:"available",spaceId:a,_out_of_quota:B.usage_status._out_of_quota}});case 11:if(n=e.sent,b.n.logDebug("CreateSpaceSetName -> availability check -> reqRes: ",n),"undefined"!==typeof n.data._update_main_state&&Q(Object(m.q)(n.data._update_main_state)),"undefined"!==typeof n.data._update_space&&null!==n.data._update_space&&Q(Object(m.r)(n.data._update_space)),"0"===n.error.code){e.next=19;break}return R(!1),"quota"===n.error.context?(Q(Object(x.a)(n.error)),k.push("/")):I(n.error.description),e.abrupt("return");case 19:if(n.data.available&&n.data.valid){e.next=25;break}return b.n.logDebug("not available"),C(!0),I("Space name ".concat(a," is not available, please choose another.")),R(!1),e.abrupt("return");case 25:Q(Object(f.c)(a)),R(!1),k.push("/createspace/finalize");case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return Boolean(void 0===N)}return Object(g.a)((function(){var e=E.a(B);"0"!==e.code&&(Q(Object(x.a)(e)),k.push("/"))})),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(c.a,{className:"create-space-set-name-row header-row",children:[Object(y.jsx)(i.a,{md:6,children:Object(y.jsx)(h.a,{text:"Back",to:"skeleton"===X?"/createspace/stepone":"/createspace/templatepicker"})}),Object(y.jsxs)(i.a,{md:6,className:"buttons-col",children:[Object(y.jsx)(b.a,{variant:"noframe",text:"Cancel",onClick:function(e){e.preventDefault(),Q(Object(m.s)({onboarding_step:0})),k.push("/")}}),Object(y.jsx)(p.b,{to:"/createspace/finalize",children:Object(y.jsx)(b.a,{onClick:P,text:"Continue"})})]})]}),Object(y.jsxs)(c.a,{className:"create-space-set-name-row",children:[Object(y.jsxs)(i.a,{md:6,children:[Object(y.jsxs)("h2",{children:["Step ","skeleton"===X?2:3]}),Object(y.jsx)("h1",{children:"What do you want to call your space?"}),Object(y.jsx)("p",{children:"This will also be used for your space's URL."})]}),Object(y.jsxs)(i.a,{md:5,className:"input-col",children:[Object(y.jsx)(d.a,{onSubmit:P,children:Object(y.jsxs)(u.a,{children:[Object(y.jsx)(l.a,{value:a,onChange:function(e){e.preventDefault();var t=e.target.value,a=Y(t);D(t),I(a)},isValid:A&&W(),isInvalid:A&&!W(),placeholder:"Enter a name for your space"}),Object(y.jsx)(u.a.Append,{children:Object(y.jsxs)(u.a.Text,{children:[".",Object(O.d)()]})})]})}),A?Object(y.jsx)("small",{className:"validation-error",children:null!==N&&void 0!==N?N:""}):""]})]}),Object(y.jsx)(b.e,{show:q,close:function(){},header:"Setting up space",message:""})]})}}}]);
//# sourceMappingURL=7.2d9d935e.chunk.js.map